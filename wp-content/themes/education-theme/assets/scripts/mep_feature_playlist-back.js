!function(t){t.extend(mejs.MepDefaults,{loopText:"Repeat On/Off",shuffleText:"Shuffle On/Off",nextText:"Next Track",prevText:"Previous Track",playlistText:"Show/Hide Playlist"}),t.extend(MediaElementPlayer.prototype,{buildloop:function(e,l,s,o){var i=this,n=t('<div class="mejs-button mejs-loop-button '+(e.options.loop?"mejs-loop-on":"mejs-loop-off")+'"><button type="button" aria-controls="'+e.id+'" title="'+e.options.loopText+'"></button></div>').appendTo(l).click(function(){e.options.loop=!e.options.loop,t(o).trigger("mep-looptoggle",[e.options.loop]),e.options.loop?n.removeClass("mejs-loop-off").addClass("mejs-loop-on"):n.removeClass("mejs-loop-on").addClass("mejs-loop-off")});i.loopToggle=i.controls.find(".mejs-loop-button")},loopToggleClick:function(){var t=this;t.loopToggle.trigger("click")},buildshuffle:function(e,l,s,o){var i=this,n=t('<div class="mejs-button mejs-shuffle-button '+(e.options.shuffle?"mejs-shuffle-on":"mejs-shuffle-off")+'"><button type="button" aria-controls="'+e.id+'" title="'+e.options.shuffleText+'"></button></div>').appendTo(l).click(function(){e.options.shuffle=!e.options.shuffle,t(o).trigger("mep-shuffletoggle",[e.options.shuffle]),e.options.shuffle?n.removeClass("mejs-shuffle-off").addClass("mejs-shuffle-on"):n.removeClass("mejs-shuffle-on").addClass("mejs-shuffle-off")});i.shuffleToggle=i.controls.find(".mejs-shuffle-button")},shuffleToggleClick:function(){var t=this;t.shuffleToggle.trigger("click")},buildprevtrack:function(e,l,s,o){{var i=this;t('<div class="mejs-button mejs-prevtrack-button mejs-prevtrack"><button type="button" aria-controls="'+e.id+'" title="'+e.options.prevText+'"></button></div>').appendTo(l).click(function(){t(o).trigger("mep-playprevtrack"),e.playPrevTrack()})}i.prevTrack=i.controls.find(".mejs-prevtrack-button")},prevTrackClick:function(){var t=this;t.prevTrack.trigger("click")},buildnexttrack:function(e,l,s,o){{var i=this;t('<div class="mejs-button mejs-nexttrack-button mejs-nexttrack"><button type="button" aria-controls="'+e.id+'" title="'+e.options.nextText+'"></button></div>').appendTo(l).click(function(){t(o).trigger("mep-playnexttrack"),e.playNextTrack()})}i.nextTrack=i.controls.find(".mejs-nexttrack-button")},nextTrackClick:function(){var t=this;t.nextTrack.trigger("click")},buildplaylist:function(e,l,s,o){var i=this,n=t('<div class="mejs-button mejs-playlist-button '+(e.options.playlist?"mejs-hide-playlist":"mejs-show-playlist")+'"><button type="button" aria-controls="'+e.id+'" title="'+e.options.playlistText+'"></button></div>').appendTo(l).click(function(){e.options.playlist=!e.options.playlist,t(o).trigger("mep-playlisttoggle",[e.options.playlist]),e.options.playlist?(s.children(".mejs-playlist").show(),n.removeClass("mejs-show-playlist").addClass("mejs-hide-playlist")):(s.children(".mejs-playlist").hide(),n.removeClass("mejs-hide-playlist").addClass("mejs-show-playlist"))});i.playlistToggle=i.controls.find(".mejs-playlist-button")},playlistToggleClick:function(){var t=this;t.playlistToggle.trigger("click")},buildplaylistfeature:function(e,l,s,o){var i=t('<div class="mejs-playlist mejs-layer"><ul class="mejs"></ul></div>').appendTo(s);e.options.playlist||i.hide(),"bottom"==e.options.playlistposition?i.css("top",e.options.audioHeight+"px"):i.css("bottom",e.options.audioHeight+"px");var n=function(t){var e=t.split("/");return e.length>0?decodeURIComponent(e[e.length-1]):""},a=[];t("#"+e.id).find(".mejs-mediaelement source").each(function(){if(""!=t.trim(this.src)){var e={};e.source=t.trim(this.src),e.name=""!=t.trim(this.title)?t.trim(this.title):n(e.source),a.push(e)}});for(var r in a)s.find(".mejs-playlist > ul").append('<li data-url="'+a[r].source+'" title="'+a[r].name+'">'+a[r].name+"</li>");s.find("li:first").addClass("current played"),s.find(".mejs-playlist > ul li").click(function(){t(this).hasClass("current")?e.play():(t(this).addClass("played"),e.playTrack(t(this)))}),o.addEventListener("ended",function(){e.playNextTrack()},!1)},playNextTrack:function(){var t=this,e=t.layers.find(".mejs-playlist > ul > li"),l=e.filter(".current"),s=e.not(".played");if(s.length<1&&(l.removeClass("played").siblings().removeClass("played"),s=e.not(".current")),t.options.shuffle)var o=Math.floor(Math.random()*s.length),i=s.eq(o);else{var i=l.next();i.length<1&&t.options.loop&&(i=l.siblings().first())}1==i.length&&(i.addClass("played"),t.playTrack(i))},playPrevTrack:function(){var t=this,e=t.layers.find(".mejs-playlist > ul > li"),l=e.filter(".current"),s=e.filter(".played").not(".current");if(s.length<1&&(l.removeClass("played"),s=e.not(".current")),t.options.shuffle)var o=Math.floor(Math.random()*s.length),i=s.eq(o);else{var i=l.prev();i.length<1&&t.options.loop&&(i=l.siblings().last())}1==i.length&&(l.removeClass("played"),t.playTrack(i))},playTrack:function(t){var e=this;e.pause(),e.setSrc(t.attr("data-url")),e.load(),e.play(),t.addClass("current").siblings().removeClass("current")},playTrackURL:function(t){var e=this,l=e.layers.find(".mejs-playlist > ul > li"),s=l.filter('[data-url="'+t+'"]');e.playTrack(s)}})}(mejs.$);